!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue-property-decorator"),require("braintree-web-drop-in")):"function"==typeof define&&define.amd?define(["exports","vue-property-decorator","braintree-web-drop-in"],e):e((t=t||self).BraintreeDropinVue={},t.vuePropertyDecorator,t.braintree)}(this,function(t,e,o){"use strict";function n(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s}o=o&&o.hasOwnProperty("default")?o.default:o;let r=class extends e.Vue{constructor(){super(...arguments),this.dropInInstance=null,this.isSubmitButtonDisabled=!0}async mounted(){this.dropInInstance||this.setup(await this.createToken())}beforeDestroy(){this.dropInInstance&&this.teardown().catch(t=>{this.onError&&this.onError(t)})}setup(t){const e={...this.options,authorization:t,container:this.$refs.containerId};o.create(e,(t,e)=>{t?this.onError&&this.onError(t):(this.onCreate&&this.onCreate(e),e.isPaymentMethodRequestable()&&(this.isSubmitButtonDisabled=!1),e.on("paymentMethodRequestable",t=>{this.isSubmitButtonDisabled=!1}),e.on("noPaymentMethodRequestable",()=>{this.isSubmitButtonDisabled=!0}),this.dropInInstance=e)})}async teardown(){return this.onDestroyStart&&await this.onDestroyStart(),new Promise((t,e)=>{this.dropInInstance.teardown(async o=>this.onDestroyEnd?await this.onDestroyEnd(o):o?e(o):t())})}async handleSubmit(t){this.dropInInstance&&!this.isSubmitButtonDisabled&&(this.isSubmitButtonDisabled=!0,this.dropInInstance.requestPaymentMethod(async(t,e)=>{if(this.isSubmitButtonDisabled=!1,t)this.onError&&this.onError(t);else{this.isSubmitButtonDisabled=!0;try{await this.createTransaction(e)}catch(t){this.onError&&this.onError(t),this.isSubmitButtonDisabled=!1}}}))}};n([e.Prop({required:!0})],r.prototype,"containerId",void 0),n([e.Prop({required:!0})],r.prototype,"createTransaction",void 0),n([e.Prop(Object)],r.prototype,"options",void 0),n([e.Prop({default:"Pay"})],r.prototype,"submitButtonText",void 0),n([e.Prop({default:"btn btn-primary"})],r.prototype,"submitButtonClasses",void 0),n([e.Prop(String)],r.prototype,"braintreeDropInWrapperClass",void 0),n([e.Prop(Function)],r.prototype,"createToken",void 0),n([e.Prop(Function)],r.prototype,"onCreate",void 0),n([e.Prop(Function)],r.prototype,"onError",void 0),n([e.Prop(Function)],r.prototype,"onDestroyStart",void 0),n([e.Prop(Function)],r.prototype,"onDestroyEnd",void 0);var i=function(t,e,o,n,r,i,s,a,d,u){"boolean"!=typeof s&&(d=a,a=s,s=!1);var p,c="function"==typeof o?o.options:o;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,r&&(c.functional=!0)),n&&(c._scopeId=n),i?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,d(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=p):e&&(p=s?function(){e.call(this,u(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),p)if(c.functional){var l=c.render;c.render=function(t,e){return p.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,p):[p]}return o}({render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:t.braintreeDropInWrapperClass},[o("div",{ref:"containerId"}),t._v(" "),o("button",{class:t.submitButtonClasses,attrs:{disabled:t.isSubmitButtonDisabled},on:{click:t.handleSubmit}},[t._v(t._s(t.submitButtonText))])])},staticRenderFns:[]},void 0,r=n([e.Component({name:"braintree-dropin-vue"})],r),void 0,!1,void 0,void 0,void 0);function s(t){s.installed||(s.installed=!0,t.component("BraintreeDropinVue",i))}const a={install:s};let d=null;"undefined"!=typeof window?d=window.Vue:"undefined"!=typeof global&&(d=global.Vue),d&&d.use(a),i.install=s,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})});